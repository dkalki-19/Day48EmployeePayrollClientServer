<!doctype html>
<html>
<head><meta charset="utf-8"><title>Test Employee REST</title></head>
<body>
  <h2>Test Employee Payroll REST</h2>

  <button id="btnGet">GET Employees</button>
  <button id="btnPost">POST (Add Sample)</button>
  <button id="btnDel">DELETE (last id)</button>

  <pre id="out" style="border:1px solid #ddd;padding:10px;margin-top:10px;"></pre>

  <script src="js/http_services.js"></script>
  <script>
    const URL = "http://localhost:3000/employees";
    const out = document.getElementById('out');

    document.getElementById('btnGet').addEventListener('click', () => {
      out.textContent = 'Loading...';
      HttpService.get(URL)
        .then(data => out.textContent = JSON.stringify(data, null, 2))
        .catch(err => out.textContent = 'ERROR: ' + err);
    });

    document.getElementById('btnPost').addEventListener('click', () => {
      const sample = { name: "New Emp", salary: 50000 };
      HttpService.post(URL, sample)
        .then(data => out.textContent = "Added:\n" + JSON.stringify(data, null, 2))
        .catch(err => out.textContent = 'ERROR: ' + err);
    });

    document.getElementById('btnDel').addEventListener('click', async () => {
      try {
        const list = await HttpService.get(URL);
        if (!list.length) { out.textContent = 'No employees to delete'; return; }
        const last = list[list.length-1];
        await HttpService.delete(URL + '/' + last.id);
        out.textContent = 'Deleted id ' + last.id;
      } catch (e) { out.textContent = 'ERROR: ' + e; }
    });
  </script>
</body>
</html>
